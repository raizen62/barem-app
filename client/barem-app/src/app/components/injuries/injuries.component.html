<mat-sidenav-container class="container" [hasBackdrop]="false">
    <mat-sidenav #sidenav mode="push" class="sidenav" [fixedInViewport]="true" opened="false" position="end" [autoFocus]="false">
        <app-injury *ngIf="!(addInjury$ | async) && (selectedInjury$ | async)" [injury]="selectedInjury$ | async" (injuryChanged)="refresh$.next()" (backEmitter)="close($event)"></app-injury>
        <app-create-injury *ngIf="addInjury$ | async" (setInjury)="openCreatedInjury($event)" (backEmitter)="close($event)"></app-create-injury>
    </mat-sidenav>

    <mat-sidenav-content>
        <div #screen class="screen">
            <div class="header" [class.raised]="scrolling$ | async">
                <a mat-icon-button [routerLink]="['/']">
                    <mat-icon>arrow_back</mat-icon>
                </a>
        
                <span class="top-bar-title mat-typogrphy">Leziuni</span>

                <div class="actions">
                    <button mat-icon-button (click)="openSearch()">
                        <mat-icon>search</mat-icon>
                    </button>
                </div>

                <div *ngIf="searching$ | async" [@fadeInOut] class="search" [class.searching]="searching$ | async">
                    <button mat-icon-button (click)="closeSearch();">
                        <mat-icon>arrow_back</mat-icon>
                    </button>
                
                    <input #searchInput type="text" placeholder="CautÄƒ leziune" class="top-bar-title mat-typogrphy search-input" [formControl]="search" spellcheck="false">
                
                    <div class="actions">
                        <button [disabled]="!search.value.length" mat-icon-button (click)="clearSearchInput();">
                            <mat-icon>close</mat-icon>
                        </button>
                    </div>
                </div>
            </div>
        
            <div *ngIf="loading$ | async" class="loader-container">
                <mat-spinner></mat-spinner>
            </div>
        
            <div class="content">
                <div class="injuries-container">
                    <app-injury-list-item *ngFor="let injury of injuries$ | async; trackBy: trackByFn" [injury]="injury" (click)="openInjury(injury)">
                    </app-injury-list-item>
                </div>
            </div>

            <div class="footer">
                <div class="actions">
                    <button mat-fab color="accent"
                        (click)="addInjury$.next(true); sidenav.toggle()">
                        <mat-icon>add</mat-icon>
                    </button>
                </div>
            </div>
        </div>
    </mat-sidenav-content>
</mat-sidenav-container>